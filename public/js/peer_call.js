// Generated by CoffeeScript 1.7.1
(function() {
  $(function() {
    var broad_cast, socket;
    socket = io.connect();
    broad_cast = $("#broad_cast");
    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
    return broad_cast.on("click", function() {
      console.log("Clicked broad cast");
      return navigator.getUserMedia({
        audio: true
      }, function(stream) {
        var peer;
        peer = new Peer({
          key: "ca99fd4a-8e43-11e4-b490-ff1e952f2799"
        });
        console.log("Waiting lisnener");
        return peer.on("open", function(id) {
          console.log(id);
          return socket.on("recive_listener", function(key) {
            var call;
            console.log(key);
            return call = peer.call(key, stream);
          });
        });
      }, function(err) {
        return console.log(err);
      });
    });
  });

}).call(this);
